#include <SPI.h>

#define LE_PIN 10
#define nOE_PIN 9

// "I love cube" in the HD44780 font
char ROWS[] = {
0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x82,0xFE,0x82,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x82,0xFE,0x02,0x00,0x00,0x1C,0x22,0x22,0x22,0x1C,0x00,0x38,0x04,0x02,0x04,0x38,0x00,0x1C,0x2A,0x2A,0x2A,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x0A,0x0A,0x0A,0x3C,0x00,0x1C,0x22,0x22,0x22,0x1C,0x00,0x3C,0x02,0x02,0x04,0x3E,0x00,0x00,0x0A,0x0C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1C,0x22,0x22,0x22,0x04,0x00,0x3C,0x02,0x02,0x04,0x3E,0x00,0xFE,0x12,0x22,0x22,0x1C,0x00,0x1C,0x2A,0x2A,0x2A,0x18,0x00,0x00,0x00,0xF2,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};

#define NUM_ROWS (sizeof(ROWS)/sizeof(char))


void
setup(void)
{
	SPI.begin();
	SPI.setBitOrder(MSBFIRST);
	SPI.setClockDivider(SPI_CLOCK_DIV16); // 16MHz/16 = 1MHz
	SPI.setDataMode(SPI_MODE0); // Posedge sensitive, Clock Idle Low
	
	pinMode(LE_PIN, OUTPUT);
	pinMode(nOE_PIN, OUTPUT);
	
	digitalWrite(LE_PIN, LOW);
	digitalWrite(nOE_PIN, LOW);
}


void
loop(void)
{
	for (int i = 0; i < NUM_ROWS; i++) {
		SPI.transfer(ROWS[i]);
		digitalWrite(LE_PIN, HIGH);
		digitalWrite(LE_PIN, LOW);
		delay(200);
	}
}
